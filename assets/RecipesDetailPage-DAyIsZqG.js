import{d as b,t as C,m as S,c as i,p as s,b as t,z as _,e as d,q as $,f as g,A as R,x as E,B as I,J as D,R as M,j as l,F as h,r as k,h as x,g as w,L,I as N,M as F,H as P,l as z,N as j,O as H,D as A,u as V,s as U,P as G,o as O,Q as q,a as J,v as Q,E as K}from"./index-D55rZ9pZ.js";/* empty css                */import{c as T}from"./convertMinute-O9slYOpP.js";const W=["src","alt"],X={class:"flex flex-col justify-between"},Y={class:"font-semibold text-base line-clamp-2"},Z={class:"flex items-center gap-4"},ee={class:"flex items-center gap-1"},se={class:"flex items-center gap-1"},te=b({__name:"RecipeSimilarCard",props:{similarRecipe:{}},emits:["clickSimilar"],setup(c,{emit:e}){const r=c,o=e,n=C(r,"similarRecipe"),a=D();function p(){a.push({name:M.RECIPE_DETAIL,params:{id:n.value.id}}),o("clickSimilar",n.value.id)}const v=S(()=>`https://spoonacular.com/recipeImages/${n.value.id}-556x370.${n.value.imageType}`);return(u,m)=>{const y=E;return l(),i("div",{class:"flex gap-4 p-3 rounded-xl bg-white shadow hover:shadow-md transition cursor-pointer",onClick:p},[s("img",{src:t(v),alt:t(n).title,class:"w-32 h-24 rounded-lg"},null,8,W),s("div",X,[s("span",Y,_(t(n).title),1),s("div",Z,[s("span",ee,[d(y,{size:20},{default:g(()=>[d(t(R))]),_:1}),$(" "+_(t(T)(t(n).readyInMinutes)),1)]),s("span",se,[d(y,{size:20},{default:g(()=>[d(t(I))]),_:1}),$(" "+_(t(n).servings)+" порц. ",1)])])])])}}}),le=[{key:"vegetarian",label:"Вегетарианское"},{key:"vegan",label:"Веганское"},{key:"glutenFree",label:"Без глютена"},{key:"dairyFree",label:"Без лактозы"},{key:"veryHealthy",label:"Полезное"},{key:"cheap",label:"Недорогое"},{key:"veryPopular",label:"Популярное"},{key:"sustainable",label:"Экологичное"},{key:"lowFodmap",label:"low Fodmap"}],ne={class:"flex flex-row gap-2"},ae=b({__name:"RecipeTags",props:{recipe:{}},setup(c){const e=c;return(r,o)=>{const n=L;return l(),i("div",ne,[(l(!0),i(h,null,k(t(le),a=>(l(),i(h,{key:a.key},[e.recipe[a.key]?(l(),x(n,{key:0,type:"success",effect:"light",class:"text-sm"},{default:g(()=>[$(_(a.label),1)]),_:2},1024)):w("",!0)],64))),128))])}}}),ie={class:"flex gap-3"},oe={class:"flex flex-col min-w-[400px] gap-2"},ce=["src"],re={class:"flex justify-between items-center gap-4 w-full"},pe={key:0,class:"flex items-center gap-1"},ue={class:"flex flex-col gap-2"},de={class:"text-2xl font-bold"},_e=["innerHTML"],me=b({__name:"RecipeDetailHeader",props:{recipe:{}},setup(c){const e=c,r=[{label:"Время приготовления",icon:R,value:T(e.recipe.readyInMinutes??0)},{label:"Полезность",icon:N,value:e.recipe.healthScore??null},{label:"Цена за порцию",icon:F,value:e.recipe.pricePerServing?`${e.recipe.pricePerServing.toFixed(2)}$`:null},{label:"Порций",icon:I,value:e.recipe.servings??null}];return(o,n)=>{const a=E;return l(),i("div",ie,[s("div",oe,[s("img",{src:e.recipe.image,class:"rounded-2xl w-full h-[300px] object-cover shadow-md"},null,8,ce),s("div",re,[(l(),i(h,null,k(r,p=>(l(),i(h,{key:p.label},[p.value?(l(),i("div",pe,[d(a,null,{default:g(()=>[(l(),x(P(p.icon)))]),_:2},1024),s("span",null,_(p.value),1)])):w("",!0)],64))),64))])]),s("div",ue,[s("h1",de,_(e.recipe.title),1),d(t(ae),{recipe:e.recipe},null,8,["recipe"]),s("p",{innerHTML:e.recipe.summary},null,8,_e)])])}}}),fe={class:"flex items-center gap-3 p-2 border rounded-lg shadow-sm bg-white"},xe={class:"font-medium"},ge={class:"text-sm text-gray-500"},he=b({__name:"RecipeIngredients",props:{ingredient:{}},setup(c){const e=c;return(r,o)=>(l(),i("div",fe,[s("div",null,[s("p",xe,_(e.ingredient.name),1),s("p",ge,_(e.ingredient.amount)+" "+_(e.ingredient.unit),1)])]))}}),ve={key:0,class:"flex flex-col gap-2 w-full"},ye=b({__name:"RecipeSteps",props:{steps:{}},setup(c){const e=c,r=z(0);function o(){r.value<e.steps.length-1?r.value++:r.value=0}return(n,a)=>{const p=j,v=H,u=A;return c.steps.length?(l(),i("div",ve,[a[1]||(a[1]=s("span",{class:"text-xl"}," Инструкция к приготовлению ",-1)),d(v,{active:t(r),"finish-status":"success",direction:"vertical"},{default:g(()=>[(l(!0),i(h,null,k(c.steps,(m,y)=>(l(),x(p,{key:y,title:`Шаг ${m.number}`,description:m.step},null,8,["title","description"]))),128))]),_:1},8,["active"]),d(u,{type:"primary",class:"w-[200px] flex justify-center",onClick:o},{default:g(()=>[...a[0]||(a[0]=[$(" Следующий шаг ",-1)])]),_:1})])):w("",!0)}}}),be={class:"flex flex-1 flex-col gap-5 bg-white rounded-2xl p-6 shadow-sm border"},ke={class:"flex flex-col gap-3"},we={class:"flex flex-col gap-2"},$e={class:"flex shrink-0 flex-col w-[500px] gap-3 bg-white rounded-xl p-5 shadow-sm border"},Ie=b({__name:"RecipesDetailPage",setup(c){const e=V(),{isLoading:r,recipe:o,recipeSimilar:n}=U(e),a=G(),p=S(()=>{const u=a.params.id;return u?Number(u):null});async function v(u){await e.getRecipeById(u),await e.getRecipeSimilarById(u)}return O(()=>{v(p.value)}),q(()=>{e.resetData()}),(u,m)=>{const y=K,B=Q;return J((l(),x(y,{class:"size-full"},{default:g(()=>[t(o)?(l(),i("div",{key:t(o).id,class:"flex gap-5 m-5 items-start"},[s("div",be,[d(t(me),{recipe:t(o)},null,8,["recipe"]),s("div",ke,[s("div",null,[m[0]||(m[0]=s("h2",{class:"text-xl font-semibold mb-2"}," Ингредиенты ",-1)),s("div",we,[(l(!0),i(h,null,k(t(o).extendedIngredients,f=>(l(),x(t(he),{key:f.id,ingredient:f},null,8,["ingredient"]))),128))])]),t(o).analyzedInstructions?.length?(l(),x(t(ye),{key:0,steps:t(o).analyzedInstructions.flatMap(f=>f.steps)},null,8,["steps"])):w("",!0)])]),s("div",$e,[m[1]||(m[1]=s("span",{class:"text-xl"}," Похожие рецепты ",-1)),(l(!0),i(h,null,k(t(n),f=>(l(),x(t(te),{key:f.id,"similar-recipe":f,onClickSimilar:v},null,8,["similar-recipe"]))),128))])])):w("",!0)]),_:1})),[[B,t(r)]])}}});export{Ie as default};
